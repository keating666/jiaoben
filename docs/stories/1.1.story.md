# Story 1.1: 项目基础与可部署的空壳

## Status
In Progress

## Story
**As a** 开发团队,
**I want** 建立完整的项目代码仓库和基础架构，并将一个最简单的欢迎页面自动部署到云端,
**so that** 我们有一个可工作的基础设施来开始构建实际功能

## Acceptance Criteria
1. 创建 Next.js Monorepo 项目结构（使用 Turborepo）
2. 配置 TypeScript 和 ESLint 共享配置
3. 创建 C端应用（creator-app）和 B端应用（admin-app）的基础结构
4. 实现一个简单的欢迎页面（包含项目名称和简介）
5. 配置 GitHub Actions CI/CD 流程
6. 成功部署到 Cloudflare Pages
7. 通过部署的 URL 可以访问欢迎页面
8. README 文档包含项目设置和开发指南

## Tasks / Subtasks
- [ ] **任务 1: 初始化 Monorepo 项目** (AC: 1, 2)
  - [ ] 使用 `create-turbo` 初始化项目或手动配置 Turborepo
  - [ ] 配置 package.json 和 turbo.json
  - [ ] 设置工作区（workspaces）配置
  - [ ] 创建共享配置包（eslint-config, tsconfig）

- [ ] **任务 2: 创建应用目录结构** (AC: 3)
  - [ ] 创建 apps/creator-app（C端 Next.js 应用）
  - [ ] 创建 apps/admin-app（B端 Next.js 应用）
  - [ ] 配置 Tailwind CSS（creator-app）
  - [ ] 配置 Ant Design（admin-app）

- [ ] **任务 3: 实现欢迎页面** (AC: 4)
  - [ ] 在 creator-app 创建首页路由
  - [ ] 设计简洁的欢迎界面
  - [ ] 添加项目名称、简介和版本信息
  - [ ] 确保响应式设计

- [ ] **任务 4: 配置 CI/CD** (AC: 5, 6)
  - [ ] 创建 .github/workflows/deploy.yml
  - [ ] 配置构建步骤（Turborepo build）
  - [ ] 配置 Cloudflare Pages 部署
  - [ ] 设置环境变量和密钥

- [ ] **任务 5: 测试和文档** (AC: 7, 8)
  - [ ] 验证本地开发环境
  - [ ] 测试生产构建
  - [ ] 验证部署流程
  - [ ] 编写 README.md
  - [ ] 添加开发指南

## Dev Notes

### 技术栈
*来源: docs/architecture/03-tech-stack.md*
- **云平台**: Cloudflare (Pages/Workers)
- **前端框架**: Next.js (TypeScript)
- **架构**: Monorepo (Turborepo)
- **UI库 (C端)**: Tailwind CSS
- **UI库 (B端)**: Ant Design
- **CI/CD**: GitHub Actions + Cloudflare

### 项目结构
*来源: docs/architecture/08-source-tree-structure.md*
```
/jiaoben
├── /apps
│   ├── /creator-app        # C端 (Next.js + Tailwind)
│   └── /admin-app          # B端 (Next.js + AntD)
├── /packages
│   ├── /api-contract       # 共享的API类型定义
│   ├── /ui                 # 共享的、无样式的UI基础组件
│   ├── /eslint-config      # 共享的ESLint配置
│   └── /tsconfig           # 共享的TypeScript配置
├── /tech-validation        # 现有的技术验证代码
├── package.json
├── turbo.json
└── .gitignore
```

### Turborepo 配置示例
```json
// turbo.json
{
  "$schema": "https://turbo.build/schema.json",
  "globalDependencies": ["**/.env.*local"],
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "!.next/cache/**"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "lint": {
      "dependsOn": ["^lint"]
    }
  }
}
```

### Next.js 应用配置
```javascript
// apps/creator-app/next.config.js
/** @type {import('next').NextConfig} */
module.exports = {
  transpilePackages: ["@jiaoben/ui"],
  output: 'export', // 静态导出，适配 Cloudflare Pages
};
```

### Cloudflare Pages 配置
- **框架预设**: Next.js (Static HTML Export)
- **构建命令**: `npm run build`
- **构建输出目录**: `apps/creator-app/out`
- **Node.js 版本**: 18.x

### GitHub Actions 工作流
```yaml
# .github/workflows/deploy.yml
name: Deploy to Cloudflare Pages

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm install
      - run: npm run build
      - name: Deploy to Cloudflare Pages
        uses: cloudflare/pages-action@v1
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: jiaoben-creator
          directory: apps/creator-app/out
```

### 欢迎页面设计要求
- 简洁大方的设计
- 包含项目 Logo（如果有）
- 项目名称："脚本仿写助手"
- 简短介绍：一句话说明项目功能
- 版本信息：v0.1.0-alpha
- "即将上线"或类似提示

### 开发命令
```bash
# 安装依赖
npm install

# 启动开发服务器（所有应用）
npm run dev

# 只启动 creator-app
npm run dev --filter=creator-app

# 构建所有应用
npm run build

# 代码检查
npm run lint
```

## Testing
### 测试标准
- 本地开发服务器正常启动
- 生产构建成功完成
- 部署到 Cloudflare Pages 成功
- 通过 URL 可以访问欢迎页面
- 页面在主流浏览器正常显示
- 移动端响应式正常

### 验证清单
- [ ] `npm install` 成功
- [ ] `npm run dev` 启动开发服务器
- [ ] `npm run build` 构建成功
- [ ] `npm run lint` 无错误
- [ ] GitHub Actions 工作流运行成功
- [ ] Cloudflare Pages 部署成功
- [ ] 部署的页面可访问
- [ ] 页面内容正确显示

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-04 | 1.0 | 初始创建故事文档 | Dev Team |

## Dev Agent Record
### Agent Model Used
Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References
_待实施时填写_

### Completion Notes List
_待实施时填写_

### File List
_待实施时填写_

## QA Results
_待实施后填写_
